import sys
assert sys.version_info >= (3, 7)
import cv2 as cv
import numpy as np

cap = cv.VideoCapture("videos/img_pexels.mp4")

#check if the obj has been create successfully
if not cap.isOpened():
    sys.exit("No such file")
    
# parameters: filepath, fourcc, fps, frame width and height
fourcc = cv.VideoWriter_fourcc("M","J","P","G") # fourcc -> identifier/algorithm to determine how the file is to be compressed or decompressed (extension varies based on hardware/software)
fps = 15
w, h = int(cap.get(3)*50/100), int(cap.get(4)*30/100) #find in opencv official documentation -> 4.7.0 -> search videocaptureAPI
out = cv.VideoWriter("videos/smaller_img_pexels.mp4", fourcc, fps, (w, h))

#read the frames with loop
while True:
    ret, frame = cap.read()
    
    #resize frame
    resize_frame = cv.resize(frame, None, fx = 0.5, fy = 0.3)
    
    if not ret:
        print("No frame detected")
        break
    cv.imshow("resize frame", resize_frame)
    k = cv.waitKey(1) & 0xFF
    if k == 27:
        break
        
    #write resize frame to new output video file
    out.write(resize_frame)
        
cap.release()
cv.destroyAllWindows()
